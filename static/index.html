<!DOCTYPE html>
<html>
<head>
	<title> My maps </title>
	<script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />
  <link href='css/style.css' rel='stylesheet' type='text/css' />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

  <script src="js/url.js"></script>

</head>

<body>
	<div id='map'></div> 

  <div class='map-overlay top'>
    <div class='map-overlay-inner'>
        <h2>Share Location Platform</h2>
        <fieldset>
            <!-- <div id="searchVINInfo">
                <label >What VIN number do you want to search?</label>
                <input type="text" name="vin" placeholder="ex. AAAAAAAAAAAAAAAAA" >
            </div> -->
            <div id="distanceInfo">
                <label >What range distance (in m)?</label>
                <input type="number" name="distance" id="distance" min="0" value="3000" >
            </div>
            <p></p>
            <div id="objectMenu">
                <label >Select Type of Object:</label>
                <select id='layerTypeObject' name='layerTypeObject'>

                    <option value="noneObject" selected>All(Car,Bike,Pedestrian,Truck,Skater) </option>
                    <option value="carObject" selected>Car</option>
                    <option value="bicycleObject" selected>Bicycle</option>
                    <option value="pedestrianObject" selected>Pedestrian</option>
                    <option value="truckObject" class="trucks" selected>Truck</option>
                    <option value="skaterObject" selected>Skater</option>

                </select>

            </div>
            <div>
                <p><label style="float: left;">Total cars: </label><pre id="totCars">  0</pre></p>
                <p><label style="float: left;">Total bicycles: </label><pre id="totBicycle">  0</pre></p>
            </div>
            <p></p>
            <p></p>
        </fieldset>
    </div>
  </div>


  <script>
     var shareLocations = ""
    var fakeCoord = "";
    var distance = 3000;
    var lon="-122.03455749999999", lat = "37.3871454";

     $.ajaxSetup({
         async: false
     });
    $.getJSON("data/shareCoordinates.geojson", function(data) {
      console.log(data); 
      fakeCoord = data
    });

    $.getJSON(FetchURL(RETRIEVE_API)+'{"lat":'+ lat +',"lng":' + lon + ',"timespan":10,"distance":'+ distance +'}', function(data) {
      console.log(data);
      if(data == null) 
        shareLocations = [];
        // }
      else
        shareLocations = data;
    });

    $.ajaxSetup({
      async: true
    });
  </script>


  <script src="js/jsSource.js"></script>

    

</body>
</html>	
